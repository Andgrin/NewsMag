"use strict";var NewsPage=function(){console.log("init NEW  NewsPage");var n=$("#newsList"),i=$("#singeNewsView"),o=$("#singeNewsView .news-container"),a=$("#newsListItemTamplate"),s=$("#singleNewTamplate"),t=$("#newsClose"),d=$("#newsNext"),c=$("#newsPrev"),m=0,l=0,r=0;function e(){$.get("http://localhost:3004/newsList/",function(){}).done(function(t){r=t.length-1;for(var e=0;e<t.length;e++)f(t[e])}).fail(function(){alert("Fail to load data")})}function f(e){var t=a.clone();t.attr("id","newsCard-"+e.id),t.css({"border-bottom-color":e.color}),t.find(".news-item__img").attr("src","img/news-img-card-0"+e.id+"-min.jpg"),t.find(".news-item__date").html(e.date),t.find(".news-item__comments").html(function(){return 1===e.comments?e.comments+" comment":e.comments+" comments"}),t.find(".news-item__title").html(e.title),t.find(".news-item__text").text(e.subtitle),t.on("click touchend",function(){var t;t=e.id,n.hide(),n.empty(),i.show(),w(t)}),n.append(t)}function u(t){o.empty(),w(t)}function w(t){$.get("http://localhost:3004/newsList/"+t,function(){}).done(function(t){!function(t){m=t.id;var e=s.clone(),n=e.find(".item-data__paragraphs");e.attr("id","singleNewsPreview-"+t.id),e.find(".item-data__img").css({"background-image":"url(img/news-img-title-0"+t.id+"-min.jpg)"}),e.find(".item-data__date").html(t.date),e.find(".item-data__comments").html(function(){return 1===t.comments?t.comments+" comment":t.comments+" comments"}),e.find(".item-data__title").html(t.title),e.find(".item-data__subtitle").text(t.subtitle);for(var i=0;i<t.paragraphs.length;i++){var a=$("<p/>",{class:"regular-text"});a.text(t.paragraphs[i]),n.append(a)}o.append(e),g(c,t.id,l),g(d,t.id,r)}(t)}).fail(function(){alert("Fail to load data")})}function g(t,e,n){e==n?t.addClass("disable"):t.removeClass("disable")}t.bind("click touchend",function(t){t.preventDefault(),i.hide(),o.empty(),n.empty(),n.show(),e()}),c.bind("click touchend",function(t){t.preventDefault(),u(m-1)}),d.bind("click touchend",function(t){t.preventDefault(),u(m+1)}),$("#sideMenuShowBtn").on("touchend",function(){$(".header__side-nav").toggleClass("show")}),e()};